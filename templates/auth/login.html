{% extends 'base.html' %} {% block content_unauth %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-5">
      <!-- Web3 Badge -->
      <div class="text-center mb-4">
        <span class="web3-badge">
          <i class="fas fa-shield-alt"></i>
          Secure Authentication
        </span>
      </div>

      <!-- Login Card -->
      <div class="card border-0 shadow-lg">
        <div class="card-body p-5">
          <!-- Header -->
          <div class="text-center mb-4">
            <div class="feature-icon mx-auto mb-3">
              <i class="fas fa-sign-in-alt fa-2x"></i>
            </div>
            <h2 class="fw-bold mb-2">Welcome Back</h2>
            <p class="text-secondary">Sign in to continue to InviFlow</p>
          </div>

          <!-- Login Form -->
          <form method="post">
            {% csrf_token %} {% if form.errors %}
            <div
              class="alert alert-danger d-flex align-items-center mb-4"
              role="alert"
            >
              <i class="fas fa-exclamation-circle me-2"></i>
              <div>
                <strong>Authentication Failed</strong><br />
                Invalid username or password. Please try again.
              </div>
            </div>
            {% endif %}

            <!-- Username Field -->
            <div class="mb-4">
              <label for="id_username" class="form-label fw-semibold">
                <i class="fas fa-user me-2" style="color: var(--primary)"></i>
                Username
              </label>
              <input
                type="text"
                name="username"
                class="form-control form-control-lg"
                id="id_username"
                placeholder="Enter your username"
                required
              />
              <small class="text-secondary mt-1 d-block">
                Use your registered username
              </small>
            </div>

            <!-- Password Field -->
            <div class="mb-4">
              <label for="id_password" class="form-label fw-semibold">
                <i class="fas fa-lock me-2" style="color: var(--primary)"></i>
                Password
              </label>
              <div class="input-group">
                <input
                  type="password"
                  name="password"
                  class="form-control form-control-lg"
                  id="id_password"
                  placeholder="Enter your password"
                  required
                />
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  onclick="togglePassword()"
                >
                  <i class="fas fa-eye" id="togglePasswordIcon"></i>
                </button>
              </div>
            </div>

            <!-- Remember Me & Login Button -->
            <div class="d-flex justify-content-between align-items-center mb-4">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="rememberMe"
                />
                <label class="form-check-label text-secondary" for="rememberMe">
                  Remember me
                </label>
              </div>
              <button type="submit" class="btn btn-primary px-5 py-2">
                <i class="fas fa-arrow-right me-2"></i>
                Sign In
              </button>
            </div>
          </form>

          <!-- Web3 Connect Option -->
          <div class="position-relative my-4">
            <hr class="text-secondary" />
            <span
              class="position-absolute top-50 start-50 translate-middle px-3 bg-white text-secondary small"
            >
              or
            </span>
          </div>

          <button
            class="btn btn-outline-secondary w-100 py-2 mb-3"
            onclick="connectWallet()"
          >
            <i class="fab fa-ethereum me-2"></i>
            Connect with Google
          </button>

          <!-- Register Link -->
          <p class="text-center text-secondary mb-0 mt-4">
            Don't have an account?
            <a
              href="{% url 'register' %}"
              class="text-primary text-decoration-none fw-semibold"
            >
              Create Account <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

{% block extra_js %}
<script>
  // Toggle password visibility
  function togglePassword() {
    const passwordInput = document.getElementById("id_password");
    const icon = document.getElementById("togglePasswordIcon");

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    } else {
      passwordInput.type = "password";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    }
  }

  // Web3 wallet connection simulation
  function connectWallet() {
    showToast("Connecting to Google account...", "info");
    setTimeout(() => {
      showToast("Demo: Google account connected successfully!", "success");
    }, 1500);
  }

  // Add floating effect to card
  document.addEventListener("DOMContentLoaded", function () {
    const card = document.querySelector(".card");
    card.style.transition = "transform 0.3s ease, box-shadow 0.3s ease";

    card.addEventListener("mouseenter", function () {
      this.style.transform = "translateY(-5px)";
      this.style.boxShadow = "var(--shadow-hover)";
    });

    card.addEventListener("mouseleave", function () {
      this.style.transform = "translateY(0)";
      this.style.boxShadow = "var(--shadow-lg)";
    });
  });
</script>

<style>
  /* Additional styles for login page */
  .feature-icon {
    width: 70px;
    height: 70px;
    background: var(--primary-light);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .feature-icon i {
    color: var(--primary);
    font-size: 2rem;
  }

  .form-control-lg {
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border-radius: var(--border-radius-md);
    border: 1.5px solid var(--gray-3);
    transition: var(--transition);
  }

  .form-control-lg:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 82, 255, 0.1);
  }

  .input-group .btn-outline-secondary {
    border: 1.5px solid var(--gray-3);
    border-left: none;
  }

  .input-group .btn-outline-secondary:hover {
    background: var(--gray-2);
    color: var(--primary);
    border-color: var(--primary);
  }

  .web3-badge {
    background: var(--gray-2);
    color: var(--text-secondary);
    padding: 0.4rem 1rem;
    border-radius: 100px;
    font-size: 0.85rem;
    font-weight: 500;
  }
</style>
{% endblock %} {% endblock %}
